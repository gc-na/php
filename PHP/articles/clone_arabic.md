<!--
Meta Description: # النسخ في PHP: كيفية استخدام الأمر clone ## ملخص يُعتبر الأمر `clone` في PHP أداة قوية تستخدم لإنشاء نسخ دقيقة من الكائنات. يسمح للمطورين بإنشاء كائن...
Meta Keywords: clone, user1, address, على, name
-->

# النسخ في PHP: كيفية استخدام الأمر clone

## ملخص
يُعتبر الأمر `clone` في PHP أداة قوية تستخدم لإنشاء نسخ دقيقة من الكائنات. يسمح للمطورين بإنشاء كائن جديد بناءً على كائن موجود بالفعل مع الحفاظ على القيم الحالية للخصائص، مما يسهل إدارة البيانات المعقدة.

## الوثائق
### الغرض
يُستخدم الأمر `clone` لإنشاء نسخة سطحية من كائن موجود. في PHP، يتم استخدامه لتفادي التأثيرات الجانبية التي قد تحدث عند تغيير كائنات مشتركة.

### الاستخدام
لنسخ كائن باستخدام `clone`، يجب أولاً تعريف الكائن الأصل، ثم استخدام الكلمة المحجوزة `clone` لإنشاء الكائن الجديد. إليك الصيغة الأساسية:

```php
$newObject = clone $originalObject;
```

### التفاصيل
- النسخ السطحية: عند استخدام `clone`، يتم نسخ الخصائص البسيطة للكائن فقط. إذا كانت هناك خصائص تشير إلى كائنات أخرى، فسيتم نسخ المؤشرات فقط، مما يعني أن التغييرات على الكائنات المترابطة ستؤثر على النسختين.
- النسخ العميق: إذا كنت بحاجة إلى نسخ كائنات مترابطة، يجب عليك تنفيذ واجهة `__clone()` في الكائن الأساسي. 

## أمثلة
### مثال 1: النسخ الأساسي
```php
class User {
    public $name;
    public $email;
}

$user1 = new User();
$user1->name = "أحمد";
$user1->email = "ahmed@example.com";

$user2 = clone $user1;
$user2->name = "محمد";

echo $user1->name; // أحمد
echo $user2->name; // محمد
```

### مثال 2: النسخ العميق باستخدام `__clone()`
```php
class Address {
    public $city;

    public function __clone() {
        // أي منطق إضافي يمكن وضعه هنا عند النسخ
    }
}

class User {
    public $name;
    public $address;

    public function __clone() {
        $this->address = clone $this->address;
    }
}

$user1 = new User();
$user1->name = "أحمد";
$user1->address = new Address();
$user1->address->city = "القاهرة";

$user2 = clone $user1;
$user2->name = "محمد";
$user2->address->city = "الإسكندرية";

echo $user1->address->city; // القاهرة
echo $user2->address->city; // الإسكندرية
```

## الشرح
### الأخطاء الشائعة
- **عدم استخدام `__clone()`**: إذا كان الكائن يحتوي على خصائص تشير إلى كائنات أخرى، يجب التأكد من استخدام دالة `__clone()` لضمان نسخ الكائنات بشكل صحيح.
- **تغييرات غير متوقعة**: عند إنشاء نسخ سطحية، إذا قمت بتعديل الخصائص التي تشير إلى كائنات أخرى، ستؤثر التغييرات على النسخ الأصلية أيضاً.

### ملاحظات إضافية
- `clone` مفيد جداً في التطبيقات التي تتطلب إدارة كائنات معقدة، مثل تطبيقات الويب التي تعتمد على نماذج البيانات المعقدة.

## ملخص جملة واحدة
الأمر `clone` في PHP يُستخدم لإنشاء نسخ دقيقة من الكائنات، مما يساعد في إدارة البيانات المعقدة دون التأثير على الكائنات الأصلية.